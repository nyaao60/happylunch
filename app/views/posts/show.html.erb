<% provide(:titlebar, "投稿詳細") %>
<div class="posting-page">
  <div class="post-form"> 
    <div class="post-edit">
    <% if current_user == @user%>
      <%= button_to "編集", edit_post_path(@post), { method: :get, id:"post-edit-btn"} %>
      <%= button_to "削除", post_path(@post),  { method: :delete, id:"post-delete-btn"} %>
    <% end %>
    </div>
    <div class="post-show-page">
      <div class="reviwer">
        <p class="reviewer-info">
        投稿者:
        <%= link_to image_tag(@user.user_image.thumb.url,id:"reviewer-icon"),user_path(@user) %>
        <%=@user.name%></p>
      </div>        
      <p id="lunch-info">ランチ情報<span class="fa-solid fa-utensils"></span></p>
      <% if @post.post_images.present? %>
        <% @post.post_images.each do |image|%>
          <%= image_tag image.to_s,id:"post-file"%>
        <%end%>  
      <% end %>
      <div class="shop-info">
        <p>店名：<%= @post.store_name%></p>
        <p>住所：<%= @post.address %></p>
        <%=render 'layouts/map'  %>
        <p>価格：<%= @post.price%>円</p>
        <p>評価：<%= render 'layouts/five_star_rating' %></p>
        <h3 style="white-space:pre-wrap;" id="post-review"><%= 
        @post.body %></h3>
      </div>
      <div class="post-subinfo">
        <p><%= render 'layouts/like' %></p>
          <div class="comment-count">
            <p><i class="fa-regular fa-comment-dots comment-icon"></i>
          <%= @comments.size %></p>
          </div>
      </div>
    </div>
  </div>  
  <p><%= render 'layouts/comment' %></p>
  <p><%= render 'layouts/comment_form' %></p>
</div>